To allow using user security mode, with NTLM auth on my Samba server,
I've changed the followind settings in my /etc/samba/smb.conf file:

security = user
encrypt passwords = yes

"encrypt passwords" can be set to no to send PlainText passwords.

After that, you need to add a user and set his password:
> sudo smbpasswd -a your_user

LM auth is by default disabled on Samba, to enable it:
lanman auth = yes

CAREFUL: once you change the "lanman auth" setting, it seems you need
to update you passwords with smbpasswd.

To allow write to your share "read only" flag must be set properly
in share definition section:
read only = no

